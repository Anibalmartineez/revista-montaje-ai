<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Montaje Offset Inteligente</title>
</head>
<body>
  <h1>Montaje Offset Inteligente</h1>
  <form method="POST" enctype="multipart/form-data">
    <label>Subir de 1 a 5 archivos PDF:</label>
    <input type="file" name="archivos[]" accept=".pdf" multiple required>
    <div id="repeticiones-container"></div>
    <script>
      document
        .querySelector('input[name="archivos[]"]')
        .addEventListener('change', function (e) {
          const container = document.getElementById('repeticiones-container');
          container.innerHTML = '';
          [...this.files].forEach((file, index) => {
            const div = document.createElement('div');
            div.innerHTML = `
        <label>${file.name} - Cantidad de repeticiones:</label>
        <input type="number" name="repeticiones_${index}" min="1" value="1" required>
        <input type="hidden" name="nombre_archivo_${index}" value="${file.name}">
        <br><br>
      `;
            container.appendChild(div);
          });
        });
    </script>
    <br><br>
    <label>Seleccionar tamaño de pliego:</label>
    <select name="pliego">
      <option value="640x880">640x880 mm</option>
      <option value="700x1000">700x1000 mm</option>
      <option value="personalizado">Personalizado</option>
    </select>
    <div id="pliego-personalizado" style="display:none;">
      <label>Ancho del pliego (mm):</label>
      <input type="number" name="ancho_pliego_custom" step="0.01">
      <label>Alto del pliego (mm):</label>
      <input type="number" name="alto_pliego_custom" step="0.01">
    </div>
    <br><br>
    <label>Separación doble corte (mm):</label>
    <input type="number" name="separacion" value="4" step="0.01">
    <br>
    <label><input type="checkbox" name="ordenar_tamano"> Ordenar por tamaño</label><br>
    <label><input type="checkbox" name="alinear_filas"> Alinear por filas</label><br>
    <label><input type="checkbox" name="centrar_montaje"> Centrar montaje en pliego</label>
    <br>
    <button type="submit">Generar Montaje</button>
  </form>
  <script>
    document.querySelector('select[name="pliego"]').addEventListener('change', function() {
      document.getElementById('pliego-personalizado').style.display =
        this.value === 'personalizado' ? 'block' : 'none';
    });
  </script>
</body>
</html>
